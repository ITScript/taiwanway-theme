{"mappings":"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","sources":["src/app.js"],"sourcesContent":["/**\n * @param {HTMLElement} element\n * @returns {(function(*): void)|*}\n */\nfunction makeDisplay(element) {\n  let timer = null;\n  let unwatch = () => {};\n\n  return isShouldBeVisible => {\n    clearTimeout(timer);\n    unwatch();\n\n    if (isShouldBeVisible) {\n      element.classList.remove('hidden');\n\n      timer = requestAnimationFrame(() => {\n        timer = requestAnimationFrame(() => {\n          element.classList.add('opacity-100');\n          element.classList.remove('opacity-0');\n        });\n      });\n    } else {\n      if (!element.classList.contains('hidden')) {\n        function hideBackToTop() {\n          element.classList.add('hidden');\n          element.removeEventListener('transitionend', hideBackToTop);\n          unwatch = () => {};\n        }\n\n        element.addEventListener('transitionend', hideBackToTop);\n\n        unwatch = () => {\n          unwatch = () => {};\n          element.removeEventListener('transitionend', hideBackToTop);\n        };\n      }\n\n      element.classList.add('opacity-0');\n      element.classList.remove('opacity-100');\n    }\n  };\n}\n\nconst menuDisplay = makeDisplay(document.getElementById('menu'));\n\nfunction scrollToElement(id) {\n  document.getElementById(id)?.scrollIntoView();\n}\n\nfunction filterProducts(type) {\n  /** @type {HTMLElement[]} */\n  const products = Array.from(document.querySelectorAll('[data-product-type]'));\n  /** @type {HTMLElement[]} */\n  const filters = Array.from(document.querySelectorAll('[data-filter]'));\n\n  filters.forEach(filter => {\n    if (filter.getAttribute('data-filter') === type) {\n      filter.classList.add('text-c1');\n    } else {\n      filter.classList.remove('text-c1');\n    }\n  });\n\n  products.forEach(product => {\n    if (type === 'all' || product.getAttribute('data-product-type') === type) {\n      product.classList.remove('hidden');\n    } else {\n      product.classList.add('hidden');\n    }\n  });\n}\n\nconst displayBackToTop = makeDisplay(document.getElementById('back-to-top'));\n\nconst observer = new IntersectionObserver(entries => {\n  entries.forEach(entry => {\n    displayBackToTop(!entry.isIntersecting);\n  });\n});\n\nobserver.observe(document.getElementById('navigation'));\n\nfunction initCarousel(id) {\n  /** @type {HTMLElement} */\n  const carousel = document.querySelector(`#carousel-${id} [data-carousel]`);\n  /** @type {HTMLElement} */\n  const thumbnails = document.querySelector(`#carousel-${id} [data-thumbnails]`);\n  /** @type {HTMLElement[]} */\n  const items = Array.from(document.querySelectorAll(`#carousel-${id} [data-carousel-item]`));\n\n  const observer = new IntersectionObserver(\n    entries => {\n      entries.forEach(entry => {\n        /** @type {HTMLElement} */\n        const item = entry.target;\n        const itemId = item.getAttribute('data-carousel-item');\n        /** @type {HTMLElement} */\n        const thumbnail = document.querySelector(`#carousel-${id} [data-thumbnail-item = \"${itemId}\"]`);\n        /** @type {HTMLImageElement} */\n        const img = thumbnail.querySelector('img');\n\n        if (entry.isIntersecting) {\n          if (\n            thumbnail.offsetLeft + thumbnail.scrollWidth > thumbnails.clientWidth ||\n            thumbnail.offsetLeft < thumbnails.scrollLeft\n          ) {\n            thumbnails.scrollTo({ left: thumbnail.offsetLeft });\n          }\n\n          img.classList.remove('grayscale');\n          img.classList.add('grayscale-0');\n        } else {\n          img.classList.add('grayscale');\n          img.classList.remove('grayscale-0');\n        }\n      });\n    },\n    { threshold: 1, root: carousel }\n  );\n\n  items.forEach(item => {\n    observer.observe(item);\n  });\n}\n\nconst modals = new Map([]);\n\nfunction initModal(id) {\n  if (!modals.has(id)) {\n    const modal = document.querySelector(`[data-modal-id=\"${id}\"]`);\n\n    modals.set(id, makeDisplay(modal));\n\n    initCarousel(id);\n  }\n\n  return modals.get(id);\n}\n\nfunction showModal(id) {\n  initModal(id)(true);\n}\n\nfunction hideModal(id) {\n  initModal(id)(false);\n}\n\nfunction increase(id) {\n  /** @type {HTMLInputElement} */\n  const input = document.querySelector(`[name=\"qty-${id}\"]`);\n\n  if (Number.parseInt(input.value) < Number.parseInt(input.max)) {\n    input.value = String(Number.parseInt(input.value) + 1);\n  }\n}\n\nfunction decrease(id) {\n  /** @type {HTMLInputElement} */\n  const input = document.querySelector(`[name=\"qty-${id}\"]`);\n\n  if (input.value > input.min) {\n    input.value = String(Number.parseInt(input.value) - 1);\n  }\n}\n\nfunction addToCart(id) {\n  /** @type {HTMLInputElement} */\n  const input = document.querySelector(`[name=\"qty-${id}\"]`);\n\n  console.log('add to cart', id, input.value);\n}\n\nfunction carouselLeft(id) {\n  const carousel = document.querySelector(`#carousel-${id} [data-carousel]`);\n\n  if (carousel.scrollLeft - carousel.clientWidth >= 0) {\n    carousel.scroll({ left: carousel.scrollLeft - carousel.clientWidth });\n  }\n}\n\nfunction carouselRight(id) {\n  const carousel = document.querySelector(`#carousel-${id} [data-carousel]`);\n\n  if (carousel.scrollLeft + carousel.clientWidth < carousel.scrollWidth) {\n    carousel.scroll({ left: carousel.scrollLeft + carousel.clientWidth });\n  }\n}\n\nfunction carouselScrollTo(id, itemId) {\n  const carousel = document.querySelector(`#carousel-${id} [data-carousel]`);\n  const item = carousel.querySelector(`[data-carousel-item = \"${itemId}\"]`);\n\n  carousel.scroll({ left: item.offsetLeft });\n}\n\nwindow.taiwanway = {\n  menuDisplay,\n  scrollToElement,\n  filterProducts,\n  showModal,\n  hideModal,\n  increase,\n  decrease,\n  addToCart,\n  carouselLeft,\n  carouselRight,\n  carouselScrollTo,\n};\n"],"names":["makeDisplay","element","timer","unwatch","isShouldBeVisible","clearTimeout","classList","remove","requestAnimationFrame","add","contains","hideBackToTop","removeEventListener","addEventListener","menuDisplay","document","getElementById","scrollToElement","id","scrollIntoView","filterProducts","type","products","Array","from","querySelectorAll","forEach","filter","getAttribute","product","displayBackToTop","observer","IntersectionObserver","entries","entry","isIntersecting","initCarousel","carousel","querySelector","thumbnails","items","itemId","target","thumbnail","img","offsetLeft","scrollWidth","clientWidth","scrollLeft","scrollTo","left","threshold","root","item","observe","modals","Map","initModal","has","modal","set","get","showModal","hideModal","increase","input","Number","parseInt","value","max","String","decrease","min","addToCart","console","log","carouselLeft","scroll","carouselRight","carouselScrollTo","window","taiwanway"],"version":3,"file":"index.4da1db57.js.map"}